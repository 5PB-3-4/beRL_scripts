# rikky_bufferスクリプト ver[1.1]

## ▼このスクリプトは何？
rikky_moduleプラグインを用いて画像を一時保存できるようにしました。基本的な使い方はゆうきさんの一時保存EXTと同じだと思います。

<br>

## ▼導入方法
aviutlのscriptフォルダに@rikky_buffer.objと@rikky_buffer.anmを、aviutl.exeがあるフォルダにrikky_buffer.luaを置いてください。なおrikky_moduleプラグインが無いと動きませんのでそちらも導入してください。

<br>

## ▼機能のご紹介
画像やフレームバッファをrikky_moduleの方に保存、読み込むことができます。このスクリプトを使うことでフレームバッファをオブジェクトとして扱う、処理が重いところを一時回避する等の使い方ができると思います。


### ■パラメータの設定
- 画像データの保存

    |トラックバー|要素|説明|
    |---|---|---|
    |0|id|保存したい画像データの保存先のidとなります|

    |チェックボックス|要素|説明|
    |---|---|---|
    |0|フレームバッファ参照|フレームバッファをオブジェクトデータにコピーします|

    |設定ダイアログ|要素|説明|
    |---|---|---|
    |_1|仮想バッファ参照|仮想バッファをオブジェクトデータにコピーします(.objのみ)|
    |_0|injection|ダイアログボックスに"文字列"を入れるとメモリのidが文字列になります|

<br>

- 画像データの読み込み
    |トラックバー|要素|説明|
    |---|---|---|
    |0|id|読み込みたい画像データの保存先のidとなります|

    |設定ダイアログ|要素|説明|
    |---|---|---|
    |_0|injection|ダイアログボックスに"文字列"を入れるとメモリのidが文字列になります|

<br>

- 画像データの消去
    |トラックバー|要素|説明|
    |---|---|---|
    |0|id|消去する画像データの保存先のidとなります|

    |チェックボックス|要素|説明|
    |---|---|---|
    |0|全消し|書き込んだ画像データを全て消去します|

    |設定ダイアログ|要素|説明|
    |---|---|---|
    |_0|injection|ダイアログボックスに"文字列"を入れるとメモリのidが文字列になります|

<br>

- 画像データの複製
    |トラックバー|要素|説明|
    |---|---|---|
    |0|dst_id|複製先の画像データのidとなります|
    |1|src_id|複製元の画像データのidとなります|

    |チェックボックス|要素|説明|
    |---|---|---|
    |0|上書き|複製先に画像データが存在する場合、画像データを上書きします|

    |設定ダイアログ|要素|説明|
    |---|---|---|
    |_0|injection|ダイアログボックスに"文字列"を入れるとメモリのidが文字列になります|

<br>

## ▼注意点
- 2022/8/10の午後にrikky_buffer.luaと@rikky_buffer.anmと@rikky_buffer.objを更新し、@rikky_buffer.anmと@rikky_buffer.objのバージョンがver1.1になりました。ver1.1では更新前のrikky_buffer.luaは利用できませんのでご注意ください。
- ~~.anmはオブジェクトの透明度も保持できますが、挙動も不安定です。フレームバッファを保存したいときには`.obj`のご利用をおすすめします。~~
- ~~透明度どころか全く違うファイルを参照したり、透明度の保持や~~ 
obj.ox等の変数保持が再現できないため項目をver1.1以降で削除させていただきます。
- 透明度についてはオブジェクトのuserdataの方に透明度を指定するスクリプトを使う場合は保存される場合があります

## ▼バグ
- ver1.0 ('22/8/10)
    - なぜかrikky_module.image("c+")が動かなかったため、for文を使って代用している。そのため若干動作が重いかも。

- ver1.1 ('22/8/11)

<br>

---
## ▼バグ報告等の連絡先はこちら
- Twitter : [@blue_beRL](https://twitter.com/blue_beRL)
- misskey : [@blue_beRL](https://misskey.io/@blue_beR
